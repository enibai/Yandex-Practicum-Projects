# Анализ пользовательского поведения в мобильном приложении.

<h1>Оглавление:<span class="tocSkip"></span></h1>
<div class="toc"><ul class="toc-item"><li><ul class="toc-item"><li><span><a href="#Описание-проекта:" data-toc-modified-id="Описание-проекта:-0.1"><span class="toc-item-num">0.1&nbsp;&nbsp;</span>Описание проекта:</a></span></li><li><span><a href="#Описание-данных:" data-toc-modified-id="Описание-данных:-0.2"><span class="toc-item-num">0.2&nbsp;&nbsp;</span>Описание данных:</a></span></li></ul></li><li><span><a href="#Шаг-1.-Импортирую-необходимые-библиотеки,-открываю-файл-с-данными-и-изучаю-общую-информацию." data-toc-modified-id="Шаг-1.-Импортирую-необходимые-библиотеки,-открываю-файл-с-данными-и-изучаю-общую-информацию.-1"><span class="toc-item-num">1&nbsp;&nbsp;</span>Шаг 1. Импортирую необходимые библиотеки, открываю файл с данными и изучаю общую информацию.</a></span><ul class="toc-item"><li><span><a href="#Импортирую-необходимые-библиотеки." data-toc-modified-id="Импортирую-необходимые-библиотеки.-1.1"><span class="toc-item-num">1.1&nbsp;&nbsp;</span>Импортирую необходимые библиотеки.</a></span></li><li><span><a href="#Вывод:" data-toc-modified-id="Вывод:-1.2"><span class="toc-item-num">1.2&nbsp;&nbsp;</span>Вывод:</a></span></li></ul></li><li><span><a href="#Шаг-2.-Предобработка-данных." data-toc-modified-id="Шаг-2.-Предобработка-данных.-2"><span class="toc-item-num">2&nbsp;&nbsp;</span>Шаг 2. Предобработка данных.</a></span><ul class="toc-item"><li><span><a href="#Исправляю-стиль-в-заголовках-столбцов." data-toc-modified-id="Исправляю-стиль-в-заголовках-столбцов.-2.1"><span class="toc-item-num">2.1&nbsp;&nbsp;</span>Исправляю стиль в заголовках столбцов.</a></span></li><li><span><a href="#Привожу-тип-данных-столбца-event_time-к-типу-datetime." data-toc-modified-id="Привожу-тип-данных-столбца-event_time-к-типу-datetime.-2.2"><span class="toc-item-num">2.2&nbsp;&nbsp;</span>Привожу тип данных столбца <strong><code>event_time</code></strong> к типу datetime.</a></span></li><li><span><a href="#Добавляю-столбцы-event_date-и-even_month-c-датой-и-месяцем." data-toc-modified-id="Добавляю-столбцы-event_date-и-even_month-c-датой-и-месяцем.-2.3"><span class="toc-item-num">2.3&nbsp;&nbsp;</span>Добавляю столбцы <strong><code>event_date</code></strong> и <strong><code>even_month</code></strong> c датой и месяцем.</a></span></li><li><span><a href="#Удаляю-явные-дубликаты." data-toc-modified-id="Удаляю-явные-дубликаты.-2.4"><span class="toc-item-num">2.4&nbsp;&nbsp;</span>Удаляю явные дубликаты.</a></span></li><li><span><a href="#Вывод:" data-toc-modified-id="Вывод:-2.5"><span class="toc-item-num">2.5&nbsp;&nbsp;</span>Вывод:</a></span></li></ul></li><li><span><a href="#Шаг-3.-Исследовательский-анализ-данных." data-toc-modified-id="Шаг-3.-Исследовательский-анализ-данных.-3"><span class="toc-item-num">3&nbsp;&nbsp;</span>Шаг 3. Исследовательский анализ данных.</a></span><ul class="toc-item"><li><span><a href="#Смотрю,-сколько-всего-событий-в-логе." data-toc-modified-id="Смотрю,-сколько-всего-событий-в-логе.-3.1"><span class="toc-item-num">3.1&nbsp;&nbsp;</span>Смотрю, сколько всего событий в логе.</a></span></li><li><span><a href="#Смотрю,-сколько-всего-пользователей-в-логе." data-toc-modified-id="Смотрю,-сколько-всего-пользователей-в-логе.-3.2"><span class="toc-item-num">3.2&nbsp;&nbsp;</span>Смотрю, сколько всего пользователей в логе.</a></span></li><li><span><a href="#Смотрю,-сколько-в-среднем-событий-приходится-на-пользователя." data-toc-modified-id="Смотрю,-сколько-в-среднем-событий-приходится-на-пользователя.-3.3"><span class="toc-item-num">3.3&nbsp;&nbsp;</span>Смотрю, сколько в среднем событий приходится на пользователя.</a></span></li><li><span><a href="#Смотрю-распределение-событий-по-пользователям." data-toc-modified-id="Смотрю-распределение-событий-по-пользователям.-3.4"><span class="toc-item-num">3.4&nbsp;&nbsp;</span>Смотрю распределение событий по пользователям.</a></span></li><li><span><a href="#Смотрю,-данными-за-какой-период-я-располагаю." data-toc-modified-id="Смотрю,-данными-за-какой-период-я-располагаю.-3.5"><span class="toc-item-num">3.5&nbsp;&nbsp;</span>Смотрю, данными за какой период я располагаю.</a></span></li><li><span><a href="#Строю-гистограмму-по-дате-и-времени." data-toc-modified-id="Строю-гистограмму-по-дате-и-времени.-3.6"><span class="toc-item-num">3.6&nbsp;&nbsp;</span>Строю гистограмму по дате и времени.</a></span></li><li><span><a href="#Отсекаю-не-актуальные-данные." data-toc-modified-id="Отсекаю-не-актуальные-данные.-3.7"><span class="toc-item-num">3.7&nbsp;&nbsp;</span>Отсекаю не актуальные данные.</a></span></li><li><span><a href="#Проверяю,-сколько-событий-и-пользователей-я-потерял." data-toc-modified-id="Проверяю,-сколько-событий-и-пользователей-я-потерял.-3.8"><span class="toc-item-num">3.8&nbsp;&nbsp;</span>Проверяю, сколько событий и пользователей я потерял.</a></span></li><li><span><a href="#Проверяю,-наличие-пользователи-из-всех-трёх-экспериментальных-групп,-а-так-же,-отсутствие-пользователей,-попавших-сразу-в-несколько-групп." data-toc-modified-id="Проверяю,-наличие-пользователи-из-всех-трёх-экспериментальных-групп,-а-так-же,-отсутствие-пользователей,-попавших-сразу-в-несколько-групп.-3.9"><span class="toc-item-num">3.9&nbsp;&nbsp;</span>Проверяю, наличие пользователи из всех трёх экспериментальных групп, а так же, отсутствие пользователей, попавших сразу в несколько групп.</a></span></li><li><span><a href="#Вывод:" data-toc-modified-id="Вывод:-3.10"><span class="toc-item-num">3.10&nbsp;&nbsp;</span>Вывод:</a></span></li></ul></li><li><span><a href="#Шаг-4.-Изучаю-воронку-событий." data-toc-modified-id="Шаг-4.-Изучаю-воронку-событий.-4"><span class="toc-item-num">4&nbsp;&nbsp;</span>Шаг 4. Изучаю воронку событий.</a></span><ul class="toc-item"><li><span><a href="#Смотрю,-какие-события-есть-в-логах,-как-часто-они-встречаются.-Сортирую-события-по-частоте." data-toc-modified-id="Смотрю,-какие-события-есть-в-логах,-как-часто-они-встречаются.-Сортирую-события-по-частоте.-4.1"><span class="toc-item-num">4.1&nbsp;&nbsp;</span>Смотрю, какие события есть в логах, как часто они встречаются. Сортирую события по частоте.</a></span></li><li><span><a href="#Считаю,-сколько-пользователей-совершали-каждое-из-этих-событий." data-toc-modified-id="Считаю,-сколько-пользователей-совершали-каждое-из-этих-событий.-4.2"><span class="toc-item-num">4.2&nbsp;&nbsp;</span>Считаю, сколько пользователей совершали каждое из этих событий.</a></span></li><li><span><a href="#Сортирую-события-по-числу-пользователей." data-toc-modified-id="Сортирую-события-по-числу-пользователей.-4.3"><span class="toc-item-num">4.3&nbsp;&nbsp;</span>Сортирую события по числу пользователей.</a></span></li><li><span><a href="#Считаю-долю-пользователей,-которые-хоть-раз-совершали-каждое-из-событий." data-toc-modified-id="Считаю-долю-пользователей,-которые-хоть-раз-совершали-каждое-из-событий.-4.4"><span class="toc-item-num">4.4&nbsp;&nbsp;</span>Считаю долю пользователей, которые хоть раз совершали каждое из событий.</a></span></li><li><span><a href="#Считаю-долю-пользователей,-которые-совершали-только-одно-событие." data-toc-modified-id="Считаю-долю-пользователей,-которые-совершали-только-одно-событие.-4.5"><span class="toc-item-num">4.5&nbsp;&nbsp;</span>Считаю долю пользователей, которые совершали только одно событие.</a></span></li><li><span><a href="#Разбираюсь,-в-каком-порядке-происходят-события." data-toc-modified-id="Разбираюсь,-в-каком-порядке-происходят-события.-4.6"><span class="toc-item-num">4.6&nbsp;&nbsp;</span>Разбираюсь, в каком порядке происходят события.</a></span></li><li><span><a href="#По-воронке-событий-считаю,-какая-доля-пользователей-проходит-на-следующий-шаг-воронки." data-toc-modified-id="По-воронке-событий-считаю,-какая-доля-пользователей-проходит-на-следующий-шаг-воронки.-4.7"><span class="toc-item-num">4.7&nbsp;&nbsp;</span>По воронке событий считаю, какая доля пользователей проходит на следующий шаг воронки.</a></span></li><li><span><a href="#Считаю,-какая-доля-пользователей-доходит-от-первого-события-до-оплаты." data-toc-modified-id="Считаю,-какая-доля-пользователей-доходит-от-первого-события-до-оплаты.-4.8"><span class="toc-item-num">4.8&nbsp;&nbsp;</span>Считаю, какая доля пользователей доходит от первого события до оплаты.</a></span></li><li><span><a href="#Вывод:" data-toc-modified-id="Вывод:-4.9"><span class="toc-item-num">4.9&nbsp;&nbsp;</span>Вывод:</a></span></li></ul></li><li><span><a href="#Шаг-5.-Изучаю-результаты-эксперимента." data-toc-modified-id="Шаг-5.-Изучаю-результаты-эксперимента.-5"><span class="toc-item-num">5&nbsp;&nbsp;</span>Шаг 5. Изучаю результаты эксперимента.</a></span><ul class="toc-item"><li><span><a href="#Считаю,-сколько-пользователей-в-каждой-экспериментальной-группе." data-toc-modified-id="Считаю,-сколько-пользователей-в-каждой-экспериментальной-группе.-5.1"><span class="toc-item-num">5.1&nbsp;&nbsp;</span>Считаю, сколько пользователей в каждой экспериментальной группе.</a></span></li><li><span><a href="#Формирую-таблицы-для-каждого-эксперимента,-с-указанием-количества-оплаченных-заказов-для-каждого-из-пользователей." data-toc-modified-id="Формирую-таблицы-для-каждого-эксперимента,-с-указанием-количества-оплаченных-заказов-для-каждого-из-пользователей.-5.2"><span class="toc-item-num">5.2&nbsp;&nbsp;</span>Формирую таблицы для каждого эксперимента, с указанием количества оплаченных заказов для каждого из пользователей.</a></span></li><li><span><a href="#Проверяю,-находят-ли-статистические-критерии-разницу-между-выборками-246-и-247." data-toc-modified-id="Проверяю,-находят-ли-статистические-критерии-разницу-между-выборками-246-и-247.-5.3"><span class="toc-item-num">5.3&nbsp;&nbsp;</span>Проверяю, находят ли статистические критерии разницу между выборками 246 и 247.</a></span></li><li><span><a href="#Проверяю-гипотезы-о-равенстве-долей-разных-групп." data-toc-modified-id="Проверяю-гипотезы-о-равенстве-долей-разных-групп.-5.4"><span class="toc-item-num">5.4&nbsp;&nbsp;</span>Проверяю гипотезы о равенстве долей разных групп.</a></span></li></ul></li><li><span><a href="#Общий-Вывод:" data-toc-modified-id="Общий-Вывод:-6"><span class="toc-item-num">6&nbsp;&nbsp;</span>Общий Вывод:</a></span></li><li><span><a href="#Рекомендации:" data-toc-modified-id="Рекомендации:-7"><span class="toc-item-num">7&nbsp;&nbsp;</span>Рекомендации:</a></span></li></ul></div>

### Описание проекта:
Заказчик - стартап, который продаёт продукты питания. Нужно разобраться, как ведут себя пользователи мобильного приложения. Изучить воронку продаж. Узнать, как пользователи доходят до покупки. Сколько пользователей доходит до покупки, а сколько - «застревает» на предыдущих шагах? На каких именно?

После этого исследовать результаты A/A/B-эксперимента. Дизайнеры хотят поменять шрифты во всём приложении, а менеджеры боятся, что пользователям будет непривычно. Договорились принять решение по результатам A/A/B-теста. Пользователей разбили на 3 группы: 2 контрольные со старыми шрифтами и одну экспериментальную - с новыми. Нужно выяснить, какой шрифт лучше.

### Описание данных:
Датасет `logs_exp` содержит:
- **`EventName`** - название события;
- **`DeviceIDHash`** - уникальный идентификатор пользователя;
- **`EventTimestamp`** - время события;
- **`ExpId`** - номер эксперимента: 246 и 247 - контрольные группы, а 248 - экспериментальная.

Каждая запись в логе - это действие пользователя, или событие.
***
## Общий Вывод:
Я импортировал необходимые библиотеки, открыл датасет, проверил основную информацию, пропусков не обнаружил. Исправил стиль в заголовках столбцов. Привел тип данных столбца **`EventTimestamp`** к типу `datetime`, добавил столбцы c датой и месяцем и удалил **413** явных дубликатов. Следует отметить, что данные изначально очень хорошего качества. Далее я приступил к проверке и изучению данных.

Выборка от **25 июля 201** до **7 августа 2019**. То есть данные за 2 недели. В логе **243713** событий и **7551** пользователь. В среднем на пользователя приходится **32** события, а по медиане - **20**. Что говорит о том, что есть несколько очень активных пользоватей. Построив гистограмму по дате и времени я выяснил, что данных за первую неделю практически нет. Поэтому я их отсек, оставив только данные от **2019-08-01**. При этом потерялось всего **2826** событий, что около **1%** и **17** пользователей, то есть менее **1%**. Проверил, есть ли пользователи из всех трёх экспериментальных групп, а также что нет пользователей, которые попали в несколько групп. Далее я приступил к изучению воронки событий.

В логе представлено пять событий:

- `MainScreenAppear` - появление главного экрана;
- `OffersScreenAppear` - появление экрана с предложениями;
- `CartScreenAppear` - появление экрана с корзиной;
- `PaymentScreenSuccessful` - появление экрана с подтвреждением оплаты;
- `Tutorial` - обучение.

Всего **466** пользователей прошло все события. Обучение было пройдено **1005** раз, из них **840** уникальными пользователями, получается **165** повторных обучений, это не вполне нормально, следует передать разработчикам, чтобы проверили обучение. Также выяснилось, что обучение может быть любым шагом по счету.  Как и предполагалось, больше всего пользователей теряется после первого шага - **38%**. А от первого события до оплаты доходит меньше половины пользователей, всего **47.7%**. Я приступил к изучению результатов эксперимента.

В каждой экспериментальной группе **2500 +- 50** человек. Чтобы проверить, находят ли статистические критерии разницу между выборками **246** и **247**, применил непараметрический тест Уилкоксона-Манна-Уитни, который показал что статистически значимой разницы между группами нет. Далее я проверил гипотезы о равенстве долей разных групп. Контрольных и с измененным шрифтом, в отдельности по каждому событию. Для этого использовал Z-критерий, уровень статистической занчимости **0.05**. Ни один из **12** тестов не смог отвергнуть нулевую гипотезу, что можно было предположить из воронки. Статистически значимых различий между долями нет. **Можно заключить, что новый шрифт никак не влияет на удержание пользователей. Пользователи из группы 248 показывают результат аналогичный контрольным группам. Поэтому смысла в изменении шрифта нет. По крайней мере на выбранный.**

## Рекомендации:
Обратить внимание на событие **Tutorial**, проверить почему пользователи проходят его повторно, все ли понятно сформулировано, не вылетает ли оно при запуске. Также возможно стоит зафиксировать этот шаг первым событием. 

Так как новый шрифт никак не влияет на удержание пользователей, смысла в изменении шрифта нет. По крайней мере на выбранный.
