# Анализ сети фитнес-центров и подготовка плана действий по удержанию клиентов.

<h1>Оглавление:<span class="tocSkip"></span></h1>
<div class="toc"><ul class="toc-item"><li><ul class="toc-item"><li><span><a href="#Описание-проекта." data-toc-modified-id="Описание-проекта.-0.1"><span class="toc-item-num">0.1&nbsp;&nbsp;</span>Описание проекта.</a></span></li><li><span><a href="#Описание-данных:" data-toc-modified-id="Описание-данных:-0.2"><span class="toc-item-num">0.2&nbsp;&nbsp;</span>Описание данных:</a></span></li></ul></li><li><span><a href="#Шаг-1.-Импортирую-необходимые-библиотеки,-открываю-файл-с-данными-и-изучаю-общую-информацию." data-toc-modified-id="Шаг-1.-Импортирую-необходимые-библиотеки,-открываю-файл-с-данными-и-изучаю-общую-информацию.-1"><span class="toc-item-num">1&nbsp;&nbsp;</span>Шаг 1. Импортирую необходимые библиотеки, открываю файл с данными и изучаю общую информацию.</a></span><ul class="toc-item"><li><span><a href="#Исправляю-стиль-в-заголовках-столбцов." data-toc-modified-id="Исправляю-стиль-в-заголовках-столбцов.-1.1"><span class="toc-item-num">1.1&nbsp;&nbsp;</span>Исправляю стиль в заголовках столбцов.</a></span></li><li><span><a href="#Вывод:" data-toc-modified-id="Вывод:-1.2"><span class="toc-item-num">1.2&nbsp;&nbsp;</span>Вывод:</a></span></li></ul></li><li><span><a href="#Шаг-2.-Провожу-исследовательский-анализ-данных-(EDA)." data-toc-modified-id="Шаг-2.-Провожу-исследовательский-анализ-данных-(EDA).-2"><span class="toc-item-num">2&nbsp;&nbsp;</span>Шаг 2. Провожу исследовательский анализ данных (EDA).</a></span><ul class="toc-item"><li><span><a href="#Строю-гистограммы-бинарных-признаков-для-тех,-кто-ушёл-(отток)-и-тех,-кто-остался." data-toc-modified-id="Строю-гистограммы-бинарных-признаков-для-тех,-кто-ушёл-(отток)-и-тех,-кто-остался.-2.1"><span class="toc-item-num">2.1&nbsp;&nbsp;</span>Строю гистограммы бинарных признаков для тех, кто ушёл (отток) и тех, кто остался.</a></span></li><li><span><a href="#Строю-диаграммы-распределения-количественных-признаков-для-тех,-кто-ушёл-(отток)-и-тех,-кто-остался." data-toc-modified-id="Строю-диаграммы-распределения-количественных-признаков-для-тех,-кто-ушёл-(отток)-и-тех,-кто-остался.-2.2"><span class="toc-item-num">2.2&nbsp;&nbsp;</span>Строю диаграммы распределения количественных признаков для тех, кто ушёл (отток) и тех, кто остался.</a></span></li><li><span><a href="#Строю-и-отображаю-матрицу-корреляций." data-toc-modified-id="Строю-и-отображаю-матрицу-корреляций.-2.3"><span class="toc-item-num">2.3&nbsp;&nbsp;</span>Строю и отображаю матрицу корреляций.</a></span></li><li><span><a href="#Удаляю-два-признака-с-коллеряций-близкой-к-1." data-toc-modified-id="Удаляю-два-признака-с-коллеряций-близкой-к-1.-2.4"><span class="toc-item-num">2.4&nbsp;&nbsp;</span>Удаляю два признака с коллеряций близкой к 1.</a></span></li><li><span><a href="#Вывод:" data-toc-modified-id="Вывод:-2.5"><span class="toc-item-num">2.5&nbsp;&nbsp;</span>Вывод:</a></span></li></ul></li><li><span><a href="#Шаг-3.-Строю-модель-прогнозирования-оттока-клиентов." data-toc-modified-id="Шаг-3.-Строю-модель-прогнозирования-оттока-клиентов.-3"><span class="toc-item-num">3&nbsp;&nbsp;</span>Шаг 3. Строю модель прогнозирования оттока клиентов.</a></span><ul class="toc-item"><li><span><a href="#Вывод:" data-toc-modified-id="Вывод:-3.1"><span class="toc-item-num">3.1&nbsp;&nbsp;</span>Вывод:</a></span></li></ul></li><li><span><a href="#Шаг-4.-Делаю-кластеризацию-клиентов." data-toc-modified-id="Шаг-4.-Делаю-кластеризацию-клиентов.-4"><span class="toc-item-num">4&nbsp;&nbsp;</span>Шаг 4. Делаю кластеризацию клиентов.</a></span><ul class="toc-item"><li><span><a href="#Обучаю-модель-кластеризации-на-основании-алгоритма-K-Means." data-toc-modified-id="Обучаю-модель-кластеризации-на-основании-алгоритма-K-Means.-4.1"><span class="toc-item-num">4.1&nbsp;&nbsp;</span>Обучаю модель кластеризации на основании алгоритма K-Means.</a></span></li><li><span><a href="#Смотрю-на-средние-значения-признаков-для-кластеров." data-toc-modified-id="Смотрю-на-средние-значения-признаков-для-кластеров.-4.2"><span class="toc-item-num">4.2&nbsp;&nbsp;</span>Смотрю на средние значения признаков для кластеров.</a></span></li><li><span><a href="#Строю-гистограммы-бинарных-признаков-для-кластеров." data-toc-modified-id="Строю-гистограммы-бинарных-признаков-для-кластеров.-4.3"><span class="toc-item-num">4.3&nbsp;&nbsp;</span>Строю гистограммы бинарных признаков для кластеров.</a></span></li><li><span><a href="#Строю-диаграммы-распределения-количественных-признаков-для-кластеров." data-toc-modified-id="Строю-диаграммы-распределения-количественных-признаков-для-кластеров.-4.4"><span class="toc-item-num">4.4&nbsp;&nbsp;</span>Строю диаграммы распределения количественных признаков для кластеров.</a></span></li></ul></li><li><span><a href="#Общий-вывод-и-рекомендации:" data-toc-modified-id="Общий-вывод-и-рекомендации:-5"><span class="toc-item-num">5&nbsp;&nbsp;</span>Общий вывод и рекомендации:</a></span></li></ul></div>

### Описание проекта.
Сеть фитнес-центров разрабатывает стратегию взаимодействия с клиентами на основе аналитических данных.
Проблема - отток клиентов. Для фитнес-центра можно считать, что клиент попал в отток, если за последний месяц ни разу не посетил спортзал. Конечно, не исключено, что он уехал на Бали и по приезде обязательно продолжит ходить на фитнес. Однако чаще бывает наоборот. Если клиент начал новую жизнь с понедельника, немного походил в спортзал, а потом пропал - скорее всего, он не вернётся. Чтобы бороться с оттоком, отдел по работе с клиентами перевёл в электронный вид множество клиентских анкет. Задача - провести анализ и подготовить план действий по удержанию клиентов.

А именно:
- научиться прогнозировать вероятность оттока (на уровне следующего месяца) для каждого клиента;
- сформировать типичные портреты клиентов: выделить несколько наиболее ярких групп и охарактеризовать их основные свойства;
- проанализировать основные признаки, наиболее сильно влияющие на отток;
- сформулировать основные выводы и разработать рекомендации по повышению качества работы с клиентами:
    - выделить целевые группы клиентов;
    - предложить меры по снижению оттока;
    - определить другие особенности взаимодействия с клиентами.

### Описание данных:

Датасет `gym_churn` содержит:

Данные клиента за предыдущий до проверки факта оттока месяц:

- **`gender`** - пол;
- **`Near_Location`** - проживание или работа в районе, где находится фитнес-центр;
- **`Partner`** - сотрудник компании-партнёра клуба (сотрудничество с компаниями, чьи сотрудники могут получать скидки на абонемент — в таком случае фитнес-центр хранит информацию о работодателе клиента);
- **`Promo_friends`** - факт первоначальной записи в рамках акции «приведи друга» (использовал промо-код от знакомого при оплате первого абонемента);
- **`Phone`** - наличие контактного телефона;
- **`Age`** - возраст;
- **`Lifetime`** - время с момента первого обращения в фитнес-центр (в месяцах).

Информация на основе журнала посещений, покупок и информация о текущем статусе абонемента клиента:
- **`Contract_period`** - длительность текущего действующего абонемента (месяц, 6 месяцев, год);
- **`Month_to_end_contract`** - срок до окончания текущего действующего абонемента (в месяцах);
- **`Group_visits`** - факт посещения групповых занятий;
- **`Avg_class_frequency_total`** - средняя частота посещений в неделю за все время с начала действия абонемента;
- **`Avg_class_frequency_current_month`** - средняя частота посещений в неделю за предыдущий месяц;
- **`Avg_additional_charges_total`** - суммарная выручка от других услуг фитнес-центра: кафе, спорттовары, косметический и массажный салон.
- **`Churn`** - факт оттока в текущем месяце.
***
## Общий вывод и рекомендации:
Я загрузил датасет и проверил основную информацию. Типы данных соответствуют содержимому столбцов. Пропущенных значений и явных дубликатов нет. Данные изначально очень хорошего качества. Все что потребовалось сделать, это исправить стиль в заголовках столбцов.

Далее я провел исследовательский анализ данных, в ходе которого выяснил что датасет на **4000** пользователей. Мужчин и женщин примерно поровну. Большая часть клиентов проживает или работает рядом с фитнес-центром, а почти половина клиентов сотрдуники компаний-партнеров клуба. Почти треть клиентов использовали промо-код от знакомого при оплате первого абонемента (акция "Приведи друга"). Возраст клиентов от **18** до **41** года, средний возраст клиента - **29** лет. Свой контактный номер телефона указали **90%** клиентов. **41%** клиентов посещали групповые занятия. Средняя длительность использования абонемента почти **5** месяцев, а медианная(то есть у большинства) всего **1** месяц. Среднее время до конца абонемента чуть больше **4** месяцев, а медианное **1** месяц. В среднем клиенты пользуются абонементом уже почти **4** месяца, а по медиане **3** месяца. Средняя частота посещений, что за этот, что за предыдущий месяц - почти **2** раза в неделю. Суммарная выручка от других услуг фитнес-центра, помимо абонемента (кафе, спорттовары, косметический и массажный салон), в среднем **146.94**. Факт оттока в текущем месяце - **26,5%**, более четверти клиентов! Стандартное отклонение, в наблюдениях где медианное значение сильно отличается от среднего имеет большой разброс.

Затем я посмотрел средние значения признаков для тех, кто ушёл и тех, кто остался и построил их графики, с помощью которых выяснил, что фитнес-центр чаще покидает те клиенты, кто проживает не рядом и те кто не является сотрудником компании-партнёра клуба, а также клиенты без промокода от знакомого и те, что реже посещают групповые занятия. Пол клиента не влияет на отток. Оставшиеся клиенты имеют преимущество над ушедшими по всем количественным признакам. Особенно превосходство заметно в длительности текущего действующего абонемента и сроке до окончания текущего действующего абонемента. Также сильно выделяется время с момента первого обращения в фитнес-центр. Можно заметить, что после **10** месяца посещений, отток полностью прекращается.

После я построил матрицу корреляций и выявил что наиболее сильная корреляция, логично, между длительностью текущего действующего абонемента и сроком до окончания текущего действующего абонемента, а также между средней частотой посещений в неделю за все время и средней частотой посещений в неделю за предыдущий месяц. Так же, средняя корреляция наблюдается между фактом сотрудничества компании-партнёра клуба и использованием промо-кода от знакомого при оплате первого абонемента, похоже что клиенты из компании-партнёра зовут своих знакомых в фитнес-центр по акции «приведи друга». Удалил по одному признаку в обоих сильно коррелирующих парах.

Затем построил модель прогнозирования оттока клиентов с использованием двух алгоритмов. Алгоритм **LogisticRegression** по всем метрикам обошел алгоритм **DecisionTreeClassifier**. Общая точность предсказания модели - **91%**, точность модели **82%**, а полнота **83%**.

После сделал кластеризацию клиентов, получил **5** кластеров и обучил модель кластеризации на основании алгоритма K-Means.

Затем я посмотрел средние значения признаков для кластеров и построил их графики, с помощью которых выяснил, что
более всего на отток влияют:
- **Длительность текущего действующего абонемента.**

  Чем дольше абонемент, тем меньше вероятность оттока. Рекомендую к концу текущего абонемента предлагать клиенту скидку на следующий или на доп. услуги. И установить прайс тем выгодней, чем дольше абонемент.
- **Проживание или работа в районе, где находится фитнес-центр.**

  Клиент охотней пойдет в фитнес-центр рядом с домом или работой. Рекомендую привлекать клиентов компаний из своего района. Или позаботиться о трансфере до ключевых транспортных развязок.
- **Факт посещения групповых занятий.**

  Не все клиенты ходят на групповые занятия, но в кластерах где эта доля особенно низка, наблюдается больший процент оттка. Социализацию и знакомства никто не отменял. Рекомендую проводить бесплатные пробные групповые занятия.
