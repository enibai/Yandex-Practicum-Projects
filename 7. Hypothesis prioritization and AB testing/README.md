# Приоритизация гипотез и A/B-тестирование.

<h1>Оглавление:<span class="tocSkip"></span></h1>
<div class="toc"><ul class="toc-item"><li><ul class="toc-item"><li><span><a href="#Описание-проекта:" data-toc-modified-id="Описание-проекта:-0.1"><span class="toc-item-num">0.1&nbsp;&nbsp;</span>Описание проекта:</a></span></li><li><span><a href="#Описание-данных:" data-toc-modified-id="Описание-данных:-0.2"><span class="toc-item-num">0.2&nbsp;&nbsp;</span>Описание данных:</a></span><ul class="toc-item"><li><span><a href="#Данные-для-первой-части:" data-toc-modified-id="Данные-для-первой-части:-0.2.1"><span class="toc-item-num">0.2.1&nbsp;&nbsp;</span>Данные для первой части:</a></span></li><li><span><a href="#Данные-для-второй-части:" data-toc-modified-id="Данные-для-второй-части:-0.2.2"><span class="toc-item-num">0.2.2&nbsp;&nbsp;</span>Данные для второй части:</a></span></li></ul></li></ul></li><li><span><a href="#Шаг-1.-Импортирую-необходимые-библиотеки,-открываю-файлы-с-данными-и-изучаю-общую-информацию." data-toc-modified-id="Шаг-1.-Импортирую-необходимые-библиотеки,-открываю-файлы-с-данными-и-изучаю-общую-информацию.-1"><span class="toc-item-num">1&nbsp;&nbsp;</span>Шаг 1. Импортирую необходимые библиотеки, открываю файлы с данными и изучаю общую информацию.</a></span><ul class="toc-item"><li><span><a href="#Исправляю-стиль-в-заголовках-столбцов." data-toc-modified-id="Исправляю-стиль-в-заголовках-столбцов.-1.1"><span class="toc-item-num">1.1&nbsp;&nbsp;</span>Исправляю стиль в заголовках столбцов.</a></span></li></ul></li><li><span><a href="#Шаг-2.-Приоритизация-гипотез." data-toc-modified-id="Шаг-2.-Приоритизация-гипотез.-2"><span class="toc-item-num">2&nbsp;&nbsp;</span>Шаг 2. Приоритизация гипотез.</a></span><ul class="toc-item"><li><span><a href="#Применяю-фреймворк-ICE-для-приоритизации-гипотез.-Сортирую-их-по-убыванию-приоритета." data-toc-modified-id="Применяю-фреймворк-ICE-для-приоритизации-гипотез.-Сортирую-их-по-убыванию-приоритета.-2.1"><span class="toc-item-num">2.1&nbsp;&nbsp;</span>Применяю фреймворк <code>ICE</code> для приоритизации гипотез. Сортирую их по убыванию приоритета.</a></span></li><li><span><a href="#Применяю-фреймворк-RICE-для-приоритизации-гипотез.-Cортирую-их-по-убыванию-приоритета." data-toc-modified-id="Применяю-фреймворк-RICE-для-приоритизации-гипотез.-Cортирую-их-по-убыванию-приоритета.-2.2"><span class="toc-item-num">2.2&nbsp;&nbsp;</span>Применяю фреймворк <code>RICE</code> для приоритизации гипотез. Cортирую их по убыванию приоритета.</a></span></li></ul></li><li><span><a href="#Шаг-3.-Анализ-A/B-теста." data-toc-modified-id="Шаг-3.-Анализ-A/B-теста.-3"><span class="toc-item-num">3&nbsp;&nbsp;</span>Шаг 3. Анализ A/B-теста.</a></span><ul class="toc-item"><li><span><a href="#Считаю-количество-посещений-в-каждой-группе." data-toc-modified-id="Считаю-количество-посещений-в-каждой-группе.-3.1"><span class="toc-item-num">3.1&nbsp;&nbsp;</span>Считаю количество посещений в каждой группе.</a></span></li><li><span><a href="#Считаю-количество-заказов-в-каждой-группе." data-toc-modified-id="Считаю-количество-заказов-в-каждой-группе.-3.2"><span class="toc-item-num">3.2&nbsp;&nbsp;</span>Считаю количество заказов в каждой группе.</a></span></li><li><span><a href="#Проверяю,-есть-ли-пользователи,-которые-попали-в-обе-группы." data-toc-modified-id="Проверяю,-есть-ли-пользователи,-которые-попали-в-обе-группы.-3.3"><span class="toc-item-num">3.3&nbsp;&nbsp;</span>Проверяю, есть ли пользователи, которые попали в обе группы.</a></span></li><li><span><a href="#Подготавливаю-таблицу-с-куммулятивными-данными-по-выручке-и-посещениям." data-toc-modified-id="Подготавливаю-таблицу-с-куммулятивными-данными-по-выручке-и-посещениям.-3.4"><span class="toc-item-num">3.4&nbsp;&nbsp;</span>Подготавливаю таблицу с куммулятивными данными по выручке и посещениям.</a></span></li><li><span><a href="#Строю-график-кумулятивной-выручки-по-группам." data-toc-modified-id="Строю-график-кумулятивной-выручки-по-группам.-3.5"><span class="toc-item-num">3.5&nbsp;&nbsp;</span>Строю график кумулятивной выручки по группам.</a></span></li><li><span><a href="#Строю-график-кумулятивного-среднего-чека-по-группам." data-toc-modified-id="Строю-график-кумулятивного-среднего-чека-по-группам.-3.6"><span class="toc-item-num">3.6&nbsp;&nbsp;</span>Строю график кумулятивного среднего чека по группам.</a></span></li><li><span><a href="#Подготавливаю-таблицу-для-графика-относительного-изменения-кумулятивного-среднего-чека-группы-B-к-группе-A." data-toc-modified-id="Подготавливаю-таблицу-для-графика-относительного-изменения-кумулятивного-среднего-чека-группы-B-к-группе-A.-3.7"><span class="toc-item-num">3.7&nbsp;&nbsp;</span>Подготавливаю таблицу для графика относительного изменения кумулятивного среднего чека группы <code>B</code> к группе <code>A</code>.</a></span></li><li><span><a href="#Строю-график-относительного-изменения-кумулятивного-среднего-чека-группы-B-к-группе-A." data-toc-modified-id="Строю-график-относительного-изменения-кумулятивного-среднего-чека-группы-B-к-группе-A.-3.8"><span class="toc-item-num">3.8&nbsp;&nbsp;</span>Строю график относительного изменения кумулятивного среднего чека группы <code>B</code> к группе <code>A</code>.</a></span></li><li><span><a href="#Строю-график-кумулятивной-конверсии-по-группам." data-toc-modified-id="Строю-график-кумулятивной-конверсии-по-группам.-3.9"><span class="toc-item-num">3.9&nbsp;&nbsp;</span>Строю график кумулятивной конверсии по группам.</a></span></li><li><span><a href="#Строю-график-относительного-изменения-кумулятивной-конверсии-группы-B-к-группе-A." data-toc-modified-id="Строю-график-относительного-изменения-кумулятивной-конверсии-группы-B-к-группе-A.-3.10"><span class="toc-item-num">3.10&nbsp;&nbsp;</span>Строю график относительного изменения кумулятивной конверсии группы <code>B</code> к группе <code>A</code>.</a></span></li><li><span><a href="#Строю-точечный-график-количества-заказов-по-пользователям." data-toc-modified-id="Строю-точечный-график-количества-заказов-по-пользователям.-3.11"><span class="toc-item-num">3.11&nbsp;&nbsp;</span>Строю точечный график количества заказов по пользователям.</a></span></li><li><span><a href="#Считаю-95-й-и-99-й-перцентили-стоимости-заказов." data-toc-modified-id="Считаю-95-й-и-99-й-перцентили-стоимости-заказов.-3.12"><span class="toc-item-num">3.12&nbsp;&nbsp;</span>Считаю <code>95-й</code> и <code>99-й</code> перцентили стоимости заказов.</a></span></li><li><span><a href="#Строю-точечный-график-количества-заказов-на-пользователя." data-toc-modified-id="Строю-точечный-график-количества-заказов-на-пользователя.-3.13"><span class="toc-item-num">3.13&nbsp;&nbsp;</span>Строю точечный график количества заказов на пользователя.</a></span></li><li><span><a href="#Считаю-95-й-и-99-й-перцентили-количества-заказов-на-пользователя." data-toc-modified-id="Считаю-95-й-и-99-й-перцентили-количества-заказов-на-пользователя.-3.14"><span class="toc-item-num">3.14&nbsp;&nbsp;</span>Считаю <code>95-й</code> и <code>99-й</code> перцентили количества заказов на пользователя.</a></span></li><li><span><a href="#Считаю-статистическую-значимость-различий-в-конверсии-между-группами-по-«сырым»-данным." data-toc-modified-id="Считаю-статистическую-значимость-различий-в-конверсии-между-группами-по-«сырым»-данным.-3.15"><span class="toc-item-num">3.15&nbsp;&nbsp;</span>Считаю статистическую значимость различий в конверсии между группами по «сырым» данным.</a></span></li><li><span><a href="#Считаю-статистическую-значимость-различий-в-среднем-чеке-заказа-между-группами-по-«сырым»-данным." data-toc-modified-id="Считаю-статистическую-значимость-различий-в-среднем-чеке-заказа-между-группами-по-«сырым»-данным.-3.16"><span class="toc-item-num">3.16&nbsp;&nbsp;</span>Считаю статистическую значимость различий в среднем чеке заказа между группами по «сырым» данным.</a></span></li><li><span><a href="#Считаю-статистическую-значимость-различий-в-конверсии-между-группами-по-«очищенным»-данным." data-toc-modified-id="Считаю-статистическую-значимость-различий-в-конверсии-между-группами-по-«очищенным»-данным.-3.17"><span class="toc-item-num">3.17&nbsp;&nbsp;</span>Считаю статистическую значимость различий в конверсии между группами по «очищенным» данным.</a></span></li><li><span><a href="#Считаю-статистическую-значимость-различий-в-среднем-чеке-заказа-между-группами-по-«очищенным»-данным." data-toc-modified-id="Считаю-статистическую-значимость-различий-в-среднем-чеке-заказа-между-группами-по-«очищенным»-данным.-3.18"><span class="toc-item-num">3.18&nbsp;&nbsp;</span>Считаю статистическую значимость различий в среднем чеке заказа между группами по «очищенным» данным.</a></span></li><li><span><a href="#Подготавливаю-таблицу-с-куммулятивными-данными-по-выручке-по-очищенным-данным." data-toc-modified-id="Подготавливаю-таблицу-с-куммулятивными-данными-по-выручке-по-очищенным-данным.-3.19"><span class="toc-item-num">3.19&nbsp;&nbsp;</span>Подготавливаю таблицу с куммулятивными данными по выручке по очищенным данным.</a></span></li><li><span><a href="#Строю-график-кумулятивной-выручки-по-группам-по-очищенным-данным." data-toc-modified-id="Строю-график-кумулятивной-выручки-по-группам-по-очищенным-данным.-3.20"><span class="toc-item-num">3.20&nbsp;&nbsp;</span>Строю график кумулятивной выручки по группам по очищенным данным.</a></span></li></ul></li><li><span><a href="#Общий-вывод:" data-toc-modified-id="Общий-вывод:-4"><span class="toc-item-num">4&nbsp;&nbsp;</span>Общий вывод:</a></span></li></ul></div>

### Описание проекта:
Заказчик - крупный интернет-магазина. Вместе с отделом маркетинга необходимо подготовить список гипотез для увеличения выручки.
Приоритизировать их, запустить A/B-тест и проанализировать результаты.

### Описание данных:
#### Данные для первой части:
Датасет `hypothesis` содержит:
- **`Hypothesis`** - краткое описание гипотезы;
- **`Reach`** - охват пользователей по 10-балльной шкале;
- **`Impact`** - влияние на пользователей по 10-балльной шкале;
- **`Confidence`** - уверенность в гипотезе по 10-балльной шкале;
- **`Efforts`** - затраты ресурсов на проверку гипотезы по 10-балльной шкале. Чем больше значение Efforts, тем дороже проверка гипотезы.

#### Данные для второй части:
Датасет `orders` содержит:
- **`transactionId`** - идентификатор заказа;
- **`visitorId`** - идентификатор пользователя, совершившего заказ;
- **`date`** - дата, когда был совершён заказ;
- **`revenue`** - выручка заказа;
- **`group`** - группа A/B-теста, в которую попал заказ.

Датасет `visitors` содержит:
- **`date`** - дата;
- **`group`** - группа A/B-теста;
- **`visitors`** - количество пользователей в указанную дату в указанной группе A/B-теста
***
## Общий вывод:
Я получил данные, загрузил их, исправил стиль названия столбцов и приступил к анализу. 

Начал с приоритизации гипотез. По фреймворку`ICE` наибольший приоритет у гипотез:
- Запустить акцию, дающую скидку на товар в день рождения;
- Добавить два новых канала привлечения трафика, что позволит привлекать на 30% больше пользователей; 
- Добавить форму подписки на все основные страницы, чтобы собрать базу клиентов для email-рассылок.

А по фреймворку `RICE` наибольший приоритет у гипотез:
- Добавить форму подписки на все основные страницы, чтобы собрать базу клиентов для email-рассылок;
- Добавить блоки рекомендаций товаров на сайт интернет магазина, чтобы повысить конверсию и средний чек заказа;
- Добавить два новых канала привлечения трафика, что позволит привлекать на 30% больше пользователей.

При анализе A/B-теста я обнаружил, что есть **58** человек, попавших в обе группы, так быть не должно, это могло повлиять на результаты теста, удалил их. Кумулятивной выручка группы `А` растет равномерно, а в группе `В` после **17.08** произошел резкий рост. Очевидно, туда попали крупные покупки. Конверсия группы `B` росла в начале теста, и стабильно обгоняет группу `А`. Избавился от всех выбросов.

Посчитал статистическую значимость различий в конверсии и средних чеках заказов между группами по «сырым» данным.
Для проверки использовал непараметрический критерий Уилкоксона-Манна-Уитни, т.к. предыдущие шаги показали что данные распределены ненормально. По результатам тестов нужно отвергаем гипотизу о равенстве средних конверсий и нельзя отвергнуть гипотизу о равенстве средних чеков.

Затем посчитал то же самое по очищенным данным. **По результатам проведенного анализа, на чистых данных, была выявлена статистическая значимость в конверсих двух групп, конверсия в группе `В` выше. В среднем чеке групп не было найдено статистически значимых различий. Но у группы `В` средний чек немного меньше. Учитывая что конверсия и размер куммулитивной выручки группы `В` больше чем у группы `А`, принимаю решение остановить тест и зафиксировать победу группы `В`. Так как средний чек не упал, но конверсия выросла, победа группы `B` даст продукту большее количество заказов.**
